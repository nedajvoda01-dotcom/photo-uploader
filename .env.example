# ============================================================================
# CRITICAL ENVIRONMENT VARIABLES (Required)
# ============================================================================

# Authentication Secret (MINIMUM 32 CHARACTERS REQUIRED)
AUTH_SECRET=your-long-random-secret-key-here-minimum-32-chars
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Yandex Disk Integration (WARNING if missing, not required for startup)
YANDEX_DISK_TOKEN=your-yandex-disk-oauth-token
# Get from: https://yandex.ru/dev/disk/poligon/

# Regions Configuration (comma-separated list, REQUIRED)
# Will be normalized: trim + toUpperCase
REGIONS=R1,R2,R3,K1,V,S1,S2
# Example: REGIONS=MSK,SPB,EKB (case-insensitive, whitespace OK)

# ============================================================================
# REGION-BASED USER MAPPINGS (Required for users)
# ============================================================================

# Users by region (email lists, whitespace OK)
# Format: email1@x.com,email2@x.com
# Emails will be normalized: trim + lowercase
REGION_R1_USERS=user1@example.com,user2@example.com
REGION_R2_USERS=user3@example.com
REGION_R3_USERS=user4@example.com
REGION_K1_USERS=user5@example.com
REGION_V_USERS=user6@example.com
REGION_S1_USERS=user7@example.com
REGION_S2_USERS=user8@example.com

# User passwords (any format, no length restriction)
# Format: email1:password1,email2:password2
# OLD: Required exactly 5 digits - REMOVED
# NEW: Any password format allowed
USER_PASSWORD_MAP=user1@example.com:SecurePass1,user2@example.com:SecurePass2,user3@example.com:Pass3,user4@example.com:MyPassword4,user5@example.com:Test5,user6@example.com:Password6,user7@example.com:Sample7,user8@example.com:Demo8

# ============================================================================
# BOOTSTRAP ADMIN CREDENTIALS
# ============================================================================

# Admin Region (default: ALL - grants access to all regions)
# Will be normalized: trim + toUpperCase
ADMIN_REGION=ALL

# Bootstrap Admin #1 (required if no database)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=your-secure-password
# OR use bcrypt hash (more secure for production):
# ADMIN_PASSWORD_HASH=$2b$10$XAFke6qJqObeuIa.1kC3T.ufP4078lWsDvwLIfMCWBhdT2gAFD3Gi
# Generate with: node -e "const bcrypt = require('bcryptjs'); bcrypt.hash('your-password', 10, (err, hash) => { console.log(hash); });"
# Note: In .env.local files, escape $ signs with backslashes: \$2b\$10\$...
# Note: In Vercel UI, use the hash as-is without escaping

# Bootstrap Admin #2 (optional, but support is mandatory)
# ADMIN_EMAIL_2=admin2@example.com
# ADMIN_PASSWORD_2=another-secure-password
# OR:
# ADMIN_PASSWORD_HASH_2=$2b$10$...

# ============================================================================
# YANDEX DISK CONFIGURATION
# ============================================================================

# Base directory on Yandex Disk (SSOT for path construction)
YANDEX_DISK_BASE_DIR=/Фото
# All car folders will be created under: ${YANDEX_DISK_BASE_DIR}/${region}/...

# ============================================================================
# STEP 3 - ZIP DOWNLOAD LIMITS
# ============================================================================

# Maximum number of files in a ZIP download
ZIP_MAX_FILES=500

# Maximum total size in MB for ZIP download
ZIP_MAX_TOTAL_MB=1500

# ============================================================================
# UPLOAD FILE SIZE LIMITS (Critical Production Fixes)
# ============================================================================

# Maximum file size per individual file (in MB)
MAX_FILE_SIZE_MB=50

# Maximum total upload size per request (in MB)
MAX_TOTAL_UPLOAD_SIZE_MB=200

# Maximum number of files per upload request
MAX_FILES_PER_UPLOAD=50

# Archive retry delay in milliseconds (for Yandex Disk operations)
ARCHIVE_RETRY_DELAY_MS=1000

# ============================================================================
# DATABASE CONFIGURATION (Optional, for Postgres mode)
# ============================================================================

# Vercel Postgres (automatically provided by Vercel when you add Postgres storage)
# POSTGRES_URL="postgres://..." (pooled connection)
# POSTGRES_URL_NON_POOLING="postgres://..." (direct connection, recommended)
# POSTGRES_PRISMA_URL="postgres://..."
# POSTGRES_URL_NO_SSL="postgres://..."
# POSTGRES_USER="..."
# POSTGRES_HOST="..."
# POSTGRES_PASSWORD="..."
# POSTGRES_DATABASE="..."

# Note: Use POSTGRES_URL_NON_POOLING for direct connections to avoid pooling issues

# ============================================================================
# LEGACY CONFIGURATION (Backward compatibility only)
# ============================================================================

# Legacy upload directory (NOT SSOT - use YANDEX_DISK_BASE_DIR for new code)
# Only used by legacy /api/upload endpoint
UPLOAD_DIR=/mvp_uploads

# Maximum file size in MB
UPLOAD_MAX_MB=20

# ============================================================================
# DEBUG OPTIONS (Optional)
# ============================================================================

# Enable authentication debug logging (1 = enabled, 0 = disabled)
# AUTH_DEBUG=1

# Enable Disk API call debug logging (1 = enabled, 0 = disabled)
# Logs each Disk API call with: {requestId, stage, normalizedPath}
# DEBUG_DISK_CALLS=1

